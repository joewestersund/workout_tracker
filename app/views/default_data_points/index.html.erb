<h1>Default Data Points for <%= @route.name %> </h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Unit</th>
      <th>Current Value</th>
      <th colspan="4"></th>
    </tr>
  </thead>

  <tbody>
    <% @data_types.each_with_index do |dt, index| %>
      <tr>
        <td><%= dt.name %></td>
        <td><%= dt.description %></td>
        <td><%= dt.unit %></td>
        <td>
          <% ddp = dt.default_data_points.first %>
          <% if ddp.present? %>
            <%= ddp.to_s %>
          <% else %>
            No value set
          <% end %>
        </td>
        <% if ddp.present? %>
          <td><%= link_to 'Edit', edit_default_data_point_path(ddp) %></td>
          <td><%= link_to 'Delete', ddp, method: :delete, data: { confirm: "Are you sure you want to delete the default data point for '#{dt.name}'?" } %></td>
        <% else %>
          <td><%= link_to 'Add', new_route_default_data_point_path(@route, data_type_id: dt)%></td>
          <td></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>