<h1>Workout Summary</h1>

<% #render 'navbar' %>

<script type="application/json" id="summary-options-JSON"><%= @summary_options_json %></script>

<%= form_with() do |form| %>
  <div class="field">
    <%= form.label :workout_type %>
    <%= form.collection_select :workout_type_id, @workout_types, :id, :name, {selected: @workout_type.id, include_blank: false},
                               {id: "select-and-redirect", "data-prefix": "/summaries/time_series?workout_type_id=", "data-suffix": ''}%>
  </div>
<% end %>

<div class="filter-box" id="summary-options-box">
  <%= form_with(url: summaries_time_series_path, method: 'get') do |form| %>
    <div class="field">
      <%= form.label :route_id %>
      <%= form.collection_select :route_id, @routes, :id, :name, {selected: params[:route_id], include_blank: true} %>
    </div>
    <div class="field">
      <%= form.label :data_type_id %>
      <%= form.collection_select  :data_type_id, @data_types, :id, :name, {selected: @data_type.id, include_blank: false} %>
    </div>
    <div class="field">
      <%= form.label :summary_functions %>
      <%= form.select :summary_function, {} %>
    </div>
    <div class="actions">
      <%= submit_tag "Search", {id: "submit_filter"} %>
    </div>
  <% end %>
</div>

<% if @show_table %>
  <%= render 'table' %>
<% else %>
  <%= render 'chart' %>
<% end %>


